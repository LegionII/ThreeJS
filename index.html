<!DOCTYPE html>
<html>

<head>
    <script type="text/javascript" src="Three.js"></script>
    <script type="text/javascript" src="physi.js"></script>
    <script type="text/javascript" src="OrbitControls.js"></script>
    <script type="text/javascript" src="TrackballControls.js"></script>

    <script type="text/javascript">

        'use strict';

        Physijs.scripts.worker = 'physijs_worker.js';
        Physijs.scripts.ammo = 'ammo.js';

        var initScene, render, renderer, scene, camera, box, ground,controls;

        initScene = function () {
            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.getElementById('viewport').appendChild(renderer.domElement);

            scene = new Physijs.Scene;

            camera = new THREE.PerspectiveCamera(
                60,
                window.innerWidth / window.innerHeight,
                1,
                1000
            );
            camera.position.z = 100;
       //     camera.lookAt(scene.position);

            scene.add(camera);

            controls = new THREE.TrackballControls(camera);
            controls.rotateSpeed = 1.0;
            controls.zoomSpeed = 1.2;
            controls.panSpeed = 0.8;

            controls.noZoom = false;
            controls.noPan = false;

            controls.staticMoving = true;
            controls.dynamicDampingFactor = 0.3;

            controls.keys = [65, 83, 68];

            controls.addEventListener('change', render);


            // Box
            box = new Physijs.BoxMesh(
                new THREE.CubeGeometry(5,5,5),
                new THREE.MeshBasicMaterial({ color: 0x888888 })
            );

            ground = new Physijs.BoxMesh(new THREE.CubeGeometry(100, 1, 100), new THREE.MeshBasicMaterial({ color: 0x8885688 }),0);
            ground.position.set(0, -20, 0);
 
            scene.add(ground);
          
            scene.add(box);


            requestAnimationFrame(render);
           
        };

        function animate() {

            requestAnimationFrame(animate);
            controls.update();

        }

        render = function () {
            
            // run physics
            scene.simulate();
            renderer.render(scene, camera); // render the scene
            requestAnimationFrame(render);      

        };

        window.onload = initScene;
        animate();

    </script>
</head>

<body>
    <div id="viewport"></div>
</body>
</html>